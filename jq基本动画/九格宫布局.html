<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>九宫格布局</title>
	<style type="text/css" media="screen">
	*{
		margin: 0;
		padding: 0;
		list-style: none;
	}
	#box{
		margin: 10px 20px;
		padding: 20px;
	}
	button{
		margin: 10px;
		padding: 0 10px;
	}
	#box1{
		position: relative;
	}
	.pic{
		margin: 20px;	
		width: 220px;
		height: 300px;
	}
	img{
		width: 220px;
		height: 300px;
	}
</style>
</head>
<body>
	<div id="box">
		<button>3列</button>
		<button>4列</button>
		<button>5列</button>		
	</div>
	<div id="box1">
		<div class="pic"><img src="img/1.jpg"></div>
		<div class="pic"><img src="img/2.jpg"></div>
		<div class="pic"><img src="img/3.jpg"></div>
		<div class="pic"><img src="img/4.jpg"></div>
		<div class="pic"><img src="img/5.jpg"></div>
		<div class="pic"><img src="img/6.jpg"></div>
		<div class="pic"><img src="img/7.jpg"></div>
		<div class="pic"><img src="img/8.jpg"></div>
		<div class="pic"><img src="img/9.jpg"></div>
		<div class="pic"><img src="img/10.jpg"></div>
		<div class="pic"><img src="img/11.jpg"></div>
		<div class="pic"><img src="img/12.jpg"></div>
		<div class="pic"><img src="img/13.jpg"></div>
		<div class="pic"><img src="img/14.jpg"></div>
		<div class="pic"><img src="img/15.jpg"></div>
		<div class="pic"><img src="img/16.jpg"></div>
		<div class="pic"><img src="img/17.jpg"></div>
		<div class="pic"><img src="img/18.jpg"></div>
		<div class="pic"><img src="img/19.jpg"></div>
		<div class="pic"><img src="img/20.jpg"></div>
	</div>
	<script>
		window.onload = function () {
			//1.获取所需元素标签

			var btn = document.getElementsByTagName('button');
			var box1 = document.getElementById('box1');

		    //2.监听按钮事件
		    btn[0].onclick = function () {		
		    	j_flex(3,btn)
		    }

		    btn[1].onclick = function () {		

		    	j_flex(4,btn)
		    }
		    btn[2].onclick = function () {		
		    	j_flex(5,btn)
		    	
		    }

            //封装函数
            function j_flex(allCol,parentNode) {
					//2.1定义变量
					var boxW = 220, boxH = 300, marginXY = 20;

		    	 //2.2遍历
		    	 for(var i = 0; i < box1.children.length; i++) {
		    	 	var row = parseInt(i / allCol);
		    	 	var col = parseInt(i % allCol);

                 //2.3盒子定位
                 var pic = box1.children[i];
                 pic.style.position = 'absolute';
                 pic.style.left =  col * (boxW + marginXY) + 'px';  
                 pic.style.top = row * (boxH + marginXY) + 'px'; 
             }
         }

     }


 </script>

</body>
</html>